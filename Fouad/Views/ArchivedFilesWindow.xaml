<Window x:Class="Fouad.Views.ArchivedFilesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Fouad.Views"
        mc:Ignorable="d"
        Title="{DynamicResource ArchivedFilesWindowTitle}" 
        Height="600" Width="900"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2C3E50" Padding="15">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{DynamicResource ArchivedFilesHeader}" 
                          FontSize="20" FontWeight="Bold" 
                          Foreground="White" 
                          VerticalAlignment="Center"/>
                <TextBlock Text="{DynamicResource ArchivedFilesSubtitle}" 
                          FontSize="12" 
                          Foreground="#BDC3C7" 
                          Margin="10,0,0,0"
                          VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Search and Filters -->
        <Border Grid.Row="1" Background="#ECF0F1" Padding="15">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Search Controls -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                    <TextBox x:Name="SearchTextBox" 
                             Text="{Binding SearchTerm, UpdateSourceTrigger=PropertyChanged}"
                             Width="300" Height="35"
                             Padding="5"
                             VerticalContentAlignment="Center"
                             FontSize="14"
                             ToolTip="{DynamicResource SearchArchivedFilesTooltip}"/>
                    <Button Content="Search" 
                            Command="{Binding SearchCommand}"
                            Width="100" Height="35"
                            Margin="10,0,0,0"
                            Style="{StaticResource PrimaryButtonStyle}"/>
                    <Button Content="Refresh" 
                            Command="{Binding LoadArchivedFilesCommand}"
                            Width="100" Height="35"
                            Margin="10,0,0,0"
                            Style="{StaticResource PrimaryButtonStyle}"/>
                </StackPanel>

                <!-- Filter Controls -->
                <Expander Grid.Row="1" Header="Filter Options" Margin="0,0,0,15">
                    <StackPanel Orientation="Vertical" Margin="10">
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="Date Range" Width="100" VerticalAlignment="Center"/>
                            <DatePicker SelectedDate="{Binding StartDate}" Width="120" Margin="5,0"/>
                            <TextBlock Text="To" Margin="10,0" VerticalAlignment="Center"/>
                            <DatePicker SelectedDate="{Binding EndDate}" Width="120" Margin="5,0"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="Uploaded By" Width="100" VerticalAlignment="Center"/>
                            <ComboBox ItemsSource="{Binding UploadedByList}" 
                                      SelectedItem="{Binding SelectedUploadedBy}"
                                      Width="200" Margin="5,0"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <CheckBox Content="Show only large files" 
                                      IsChecked="{Binding ShowLargeFilesOnly}"
                                      Margin="0,0,20,0"/>
                            <Button Content="Apply Filters" 
                                    Command="{Binding ApplyFiltersCommand}"
                                    Width="100" Height="30"
                                    Style="{StaticResource PrimaryButtonStyle}"/>
                            <Button Content="Clear Filters" 
                                    Command="{Binding ClearFiltersCommand}"
                                    Width="100" Height="30"
                                    Margin="10,0,0,0"
                                    Style="{StaticResource PrimaryButtonStyle}"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- Archived Files DataGrid -->
                <DataGrid Grid.Row="2"
                          x:Name="ArchivedFilesDataGrid"
                          ItemsSource="{Binding ArchivedFiles}"
                          SelectedItem="{Binding SelectedFile}"
                          SelectionMode="Extended"
                          SelectionUnit="FullRow"
                          IsReadOnly="True"
                          RowHeight="30"
                          FontSize="13"
                          Background="White"
                          BorderBrush="#BDC3C7"
                          BorderThickness="1"
                          AutoGenerateColumns="False"
                          SelectionChanged="ArchivedFilesDataGrid_SelectionChanged">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Archive ID" 
                                          Binding="{Binding ArchiveId}" 
                                          Width="75"/>
                        <DataGridTextColumn Header="File Name" 
                                          Binding="{Binding FileName}" 
                                          Width="150"/>
                        <DataGridTextColumn Header="Upload Date" 
                                          Binding="{Binding UploadDate, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}" 
                                          Width="150"/>
                        <DataGridTextColumn Header="Uploaded By" 
                                          Binding="{Binding UploadedBy}" 
                                          Width="75"/>
                        <DataGridTextColumn Header="File Size" 
                                          Binding="{Binding FileSize}" 
                                          Width="75"/>
                        <DataGridTextColumn Header="Rows" 
                                          Binding="{Binding RowCount}" 
                                          Width="75"/>
                        <DataGridTextColumn Header="Columns" 
                                          Binding="{Binding ColumnCount}" 
                                          Width="75"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>

        <!-- Action Buttons -->
        <Border Grid.Row="2" Background="#34495E" Padding="15">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Work on Selected File" 
                        Command="{Binding WorkOnSelectedFileCommand}"
                        Width="180" Height="40"
                        Margin="0,0,10,0"
                        Style="{StaticResource PrimaryButtonStyle}"/>
                <Button Content="Work on Multiple Files" 
                        Command="{Binding WorkOnMultipleFilesCommand}"
                        Width="180" Height="40"
                        Margin="0,0,10,0"
                        Style="{StaticResource PrimaryButtonStyle}"/>
                <Button Content="Compare Files" 
                        Command="{Binding CompareSelectedFilesCommand}"
                        Width="180" Height="40"
                        Margin="0,0,10,0"
                        Style="{StaticResource PrimaryButtonStyle}"/>
                <Button Content="View Latest Info" 
                        Command="{Binding ViewLatestInfoCommand}"
                        Width="180" Height="40"
                        Style="{StaticResource PrimaryButtonStyle}"/>
                <Button Content="Close" 
                        Click="CloseButton_Click"
                        Width="100" Height="40"
                        Margin="10,0,0,0"
                        Style="{StaticResource PrimaryButtonStyle}"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>